<!DOCTYPE html>
<html lang="en" class="bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-white">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CryptoEscrow - Home</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
  <header class="bg-white dark:bg-gray-900 p-4 shadow-md">
    <div class="flex justify-between items-center">
      <h1 class="text-lg font-bold text-indigo-600">CryptoEscrow</h1>
      <button id="menuBtn" class="text-gray-600 dark:text-gray-300 text-2xl sm:hidden">‚ò∞</button>
    </div>
    <nav id="mobileMenu" class="mt-2 hidden sm:flex flex-col sm:flex-row sm:space-x-4 text-sm text-gray-700 dark:text-gray-200">
      <a href="index.html" class="nav-link py-1 hover:underline">üè† Home</a>
      <a href="submit.html" class="nav-link py-1 hover:underline">üì§ Submit Project</a>
      <a href="escrow.html" class="nav-link py-1 hover:underline">üíº Request Escrow</a>
      <a href="status.html" class="nav-link py-1 hover:underline">üìç Track Status</a>
      <a href="admin.html" id="adminLink" class="nav-link py-1 hover:underline hidden">üîê Admin</a>
      <a href="terms.html" class="nav-link py-1 hover:underline">üìú Terms</a>
      <a href="privacy.html" class="nav-link py-1 hover:underline">üîí Privacy</a>
    </nav>
  </header>
  <!-- Wallet Connect Button -->
<button onclick="openWalletModal()" id="walletBtn" class="text-sm bg-gray-200 hover:bg-gray-300 text-gray-800 px-3 py-1 rounded">
  üîå Connect Wallet
</button>

<!-- Modal -->
<div id="walletModal" class="fixed inset-0 bg-black/50 flex items-center justify-center hidden z-50">
  <div class="bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg max-w-sm w-full">
    <h2 class="text-xl font-semibold mb-4">Connect Wallet</h2>
    <button onclick="connectFakeWallet()" class="w-full bg-orange-500 text-white p-2 rounded hover:bg-orange-600">ü¶ä MetaMask (Simulated)</button>
    <button onclick="closeWalletModal()" class="w-full mt-4 text-sm text-gray-500 hover:underline">Cancel</button>
  </div>
</div>

<script>
  function openWalletModal() {
    document.getElementById("walletModal").classList.remove("hidden");
  }
  
  function closeWalletModal() {
    document.getElementById("walletModal").classList.add("hidden");
  }
  
  function connectFakeWallet() {
    const fakeAddress = "0x" + Math.random().toString(16).substr(2, 40);
    localStorage.setItem("walletAddress", fakeAddress);
    updateWalletUI();
    closeWalletModal();
    alert("‚úÖ Wallet connected!");
  }
  
  function updateWalletUI() {
    const walletBtn = document.getElementById("walletBtn");
    const address = localStorage.getItem("walletAddress");
    if (address) {
      walletBtn.textContent = "‚úÖ Wallet Connected";
      walletBtn.classList.remove("bg-gray-200");
      walletBtn.classList.add("bg-green-200", "text-green-800");
    }
  }
  
  updateWalletUI();
</script>

  <main class="p-6 max-w-4xl mx-auto">
    <h2 class="text-2xl font-semibold mb-4">Welcome to CryptoEscrow</h2>
    <p class="mb-6 text-gray-600 dark:text-gray-300">
      Discover new crypto projects and request escrow services safely.
    </p>

    <div id="projectList" class="grid gap-4 sm:grid-cols-2"></div>
  </main>

  <script>
    document.getElementById("menuBtn").onclick = () => {
      document.getElementById("mobileMenu").classList.toggle("hidden");
    };

    const currentPage = window.location.pathname.split("/").pop();
    document.querySelectorAll(".nav-link").forEach(link => {
      if (link.getAttribute("href") === currentPage) {
        link.classList.add("font-semibold", "text-indigo-600");
      }
    });

    const customProjects = JSON.parse(localStorage.getItem("customProjects") || "[]");
    const container = document.getElementById("projectList");

    customProjects.forEach(project => {
      const card = document.createElement("div");
      card.className = "bg-white dark:bg-gray-700 p-5 rounded-2xl shadow hover:shadow-lg transition";
      card.innerHTML = `
        <h2 class="text-lg font-semibold mb-1">${project.name}</h2>
        <p class="text-sm text-gray-500 mb-2">${project.category}</p>
        <p class="text-sm text-gray-600 dark:text-gray-300 mb-3">${project.description}</p>
        <span class="inline-block bg-indigo-100 text-indigo-700 text-xs px-2 py-1 rounded-full mr-2">${project.status}</span>
        <div class="mt-3 space-x-4">
          <a href="project.html?project=${encodeURIComponent(project.name)}" class="text-sm text-indigo-600 hover:underline">View Details</a>
          <button onclick="reportScam('${project.name}')" class="text-xs text-red-600 hover:underline">üö© Report Scam</button>
        </div>
      `;
      container.appendChild(card);
    });

    function reportScam(projectName) {
      const reports = JSON.parse(localStorage.getItem("scamReports") || "[]");
      reports.push({ project: projectName, reportedAt: new Date().toISOString() });
      localStorage.setItem("scamReports", JSON.stringify(reports));
      alert("‚ö†Ô∏è Project reported successfully!");
    }
  </script>
  <script>
  const currentPage = window.location.pathname.split("/").pop();
  document.querySelectorAll(".nav-link").forEach(link => {
    if (link.getAttribute("href") === currentPage) {
      link.classList.add("font-semibold", "text-indigo-600");
    }
  });
</script>
  <script>
  const currentPage = window.location.pathname.split("/").pop();
  document.querySelectorAll(".nav-link").forEach(link => {
    if (link.getAttribute("href") === currentPage) {
      link.classList.add("font-semibold", "text-indigo-600");
    }
  });

  // Optional: show admin link if localStorage flag exists
  const isAdmin = localStorage.getItem("adminAccess");
  if (isAdmin === "true") {
    document.getElementById("adminLink")?.classList.remove("hidden");
  }
</script>
</body>
</html>
